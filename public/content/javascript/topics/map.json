{
  "id": "map",
  "title": "Array.map()",
  "category": "Array Methods",
  "description": "Creates a new array with the results of calling a function on every element.",
  "explanation": "Array.map() creates a new array by calling a callback function on every element of the original array. It does NOT mutate the original array.\n\nSyntax: array.map(callback(element, index, array), thisArg)\n\nKey characteristics:\n- Always returns a new array of the SAME length\n- Callback is called for each element (skips empty slots in sparse arrays)\n- Returns undefined for elements where callback returns nothing\n- Cannot break/stop early — use find/some/every/for...of for that\n\nCommon use cases:\n- Transforming data: numbers.map(n => n * 2)\n- Extracting properties: users.map(u => u.name)\n- Formatting: prices.map(p => `$${p.toFixed(2)}`)\n- React rendering: items.map(item => <Card key={item.id} {...item} />)\n\nmap vs forEach:\n- map returns a new array — use when you NEED the result\n- forEach returns undefined — use for side effects only\n- Never use map and ignore its return value\n\nPerformance: O(n) time, O(n) space for the new array. For large datasets where you don't need all results, consider lazy evaluation or generators.",
  "implementation": "const numbers = [1, 2, 3, 4];\nconst doubled = numbers.map(num => num * 2);\n// [2, 4, 6, 8]",
  "example": "const users = [{name: 'John', age: 25}, {name: 'Jane', age: 30}];\nconst names = users.map(user => user.name);\n// ['John', 'Jane']",
  "useCase": "Transforming data, extracting properties from objects",
  "interviewQuestions": [
    {
      "question": "What does Array.map return?",
      "answer": "A new array of the same length where each item is transformed by the callback result."
    },
    {
      "question": "Why is map preferred over forEach for transformations?",
      "answer": "map is declarative, chainable, and communicates that output array is the goal."
    },
    {
      "question": "What are common mistakes with map in React rendering?",
      "answer": "Forgetting return in callback or forgetting stable key assignment in rendered lists."
    },
    {
      "question": "Can map mutate source array?",
      "answer": "The method itself does not mutate source, but callback can mutate objects by reference if you do it explicitly."
    },
    {
      "question": "When not to use map?",
      "answer": "Do not use map when you ignore the returned array. Use forEach or for...of for side effects only."
    },
    {
      "question": "What are the arguments passed to the map callback?",
      "answer": "Three arguments: (element, index, array). The second arg thisArg sets 'this' inside callback. Arrow functions ignore thisArg."
    },
    {
      "question": "How does map handle sparse arrays?",
      "answer": "map skips empty slots in sparse arrays (does not call callback for them) but preserves the holes in the output array."
    },
    {
      "question": "Can you break or stop early in map?",
      "answer": "No. map always iterates the entire array. For early termination, use for...of, find, some, or every instead."
    },
    {
      "question": "What happens if you forget return in map callback with braces?",
      "answer": "The callback implicitly returns undefined for that element. Common bug: .map(x => { x * 2 }) gives [undefined, ...]. Fix: add return or remove braces."
    },
    {
      "question": "How do you chain map with other array methods?",
      "answer": "map returns an array, so you can chain: arr.filter(predicate).map(transform).sort(compare). Each creates an intermediate array. For performance, use reduce for single-pass."
    }
  ],
  "exercises": [
    {
      "type": "output",
      "question": "Predict: [1,2,3].map(n=>n*2)",
      "answer": "[2,4,6]",
      "output": "[2,4,6]"
    },
    {
      "type": "implement",
      "question": "Map users array to usernames array.",
      "code": "const usernames = users.map(u => u.username);"
    },
    {
      "type": "debug",
      "question": "Fix map callback that returns undefined due to braces.",
      "answer": "Add explicit return inside braces or remove braces for implicit return."
    },
    {
      "type": "scenario",
      "question": "You need transform API payload to UI card model using map. Draft mapping fields.",
      "answer": "Return new object with only required fields and formatted values."
    },
    {
      "type": "output",
      "question": "Predict output: [1,2,3].map((n,i)=>n+i)",
      "answer": "[1,3,5]",
      "output": "[1,3,5]"
    },
    {
      "type": "output",
      "question": "Predict output: [1,2].map(function(){ return this.x }, {x:7})",
      "answer": "[7,7]",
      "output": "[7,7]"
    },
    {
      "type": "implement",
      "question": "Implement toCurrency(prices) using map to return strings like \"$10.00\"."
    },
    {
      "type": "implement",
      "question": "Map products to {id, label} where label is `${name} - ${price}`."
    },
    {
      "type": "debug",
      "question": "['1','2','3'].map(parseInt) gives unexpected result. Why?",
      "answer": "parseInt receives (element, index) as arguments: parseInt('1',0)=1, parseInt('2',1)=NaN, parseInt('3',2)=NaN. Use .map(Number) or .map(s => parseInt(s, 10)) instead."
    },
    {
      "type": "debug",
      "question": "Map over sparse array behaves unexpectedly. Why?",
      "answer": "map skips empty slots in sparse arrays."
    }
  ],
  "programExercises": [
    {
      "type": "program",
      "question": "Program 1: Double all numbers using map.",
      "code": "const nums=[1,2,3,4];\nconst doubled=nums.map(n=>n*2);\nconsole.log(doubled);",
      "output": "[ 2, 4, 6, 8 ]"
    },
    {
      "type": "program",
      "question": "Program 2: Convert names to uppercase.",
      "code": "const names=[\"jit\",\"ram\"];\nconsole.log(names.map(n=>n.toUpperCase()));",
      "output": "[ \"JIT\", \"RAM\" ]"
    },
    {
      "type": "program",
      "question": "Program 3: Extract ids from object list.",
      "code": "const users=[{id:1,name:\"A\"},{id:2,name:\"B\"}];\nconsole.log(users.map(u=>u.id));",
      "output": "[ 1, 2 ]"
    },
    {
      "type": "program",
      "question": "Program 4: Format prices to 2 decimal strings.",
      "code": "const prices=[10,15.5,3];\nconsole.log(prices.map(p=>`$${p.toFixed(2)}`));",
      "output": "[ \"$10.00\", \"$15.50\", \"$3.00\" ]"
    },
    {
      "type": "program",
      "question": "Program 5: Add index to each element text.",
      "code": "const arr=[\"a\",\"b\",\"c\"];\nconsole.log(arr.map((v,i)=>`${i}:${v}`));",
      "output": "[ \"0:a\", \"1:b\", \"2:c\" ]"
    },
    {
      "type": "program",
      "question": "Program 6: Create boolean pass/fail from marks >= 40.",
      "code": "const marks=[30,40,90];\nconsole.log(marks.map(m=>m>=40));",
      "output": "[ false, true, true ]"
    },
    {
      "type": "program",
      "question": "Program 7: Map nested object array to labels.",
      "code": "const p=[{name:\"Pen\",price:10},{name:\"Book\",price:50}];\nconsole.log(p.map(x=>`${x.name}-${x.price}`));",
      "output": "[ \"Pen-10\", \"Book-50\" ]"
    },
    {
      "type": "program",
      "question": "Program 8: Parse numeric strings to numbers.",
      "code": "const s=[\"1\",\"2\",\"3\"];\nconsole.log(s.map(Number));",
      "output": "[ 1, 2, 3 ]"
    },
    {
      "type": "program",
      "question": "Program 9: Map dates to year values.",
      "code": "const dates=[\"2024-01-01\",\"2026-02-12\"];\nconsole.log(dates.map(d=>new Date(d).getFullYear()));",
      "output": "[ 2024, 2026 ]"
    },
    {
      "type": "program",
      "question": "Program 10: Build slug list from titles.",
      "code": "const titles=[\"Hello World\",\"JS Interview\"];\nconst slugs=titles.map(t=>t.toLowerCase().replace(/\\s+/g,\"-\"));\nconsole.log(slugs);",
      "output": "[ \"hello-world\", \"js-interview\" ]"
    }
  ]
}
