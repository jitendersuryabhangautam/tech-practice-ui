{
  "id": "aggregation-functions",
  "title": "Aggregation (COUNT, SUM, AVG)",
  "description": "Perform calculations across rows using aggregate functions like COUNT, SUM, AVG, MIN, MAX with GROUP BY.",
  "code": "-- Count total users\nSELECT COUNT(*) AS total_users FROM users;\n\n-- Count total customers\nSELECT COUNT(*) AS total_customers \nFROM users WHERE role = 'customer';\n\n-- Count total orders\nSELECT COUNT(*) AS total_orders FROM orders;\n\n-- Count orders per status\nSELECT status, COUNT(*) AS order_count \nFROM orders \nGROUP BY status;\n\n-- Total revenue generated\nSELECT SUM(total_amount) AS total_revenue \nFROM orders \nWHERE status = 'completed';\n\n-- Average order value\nSELECT AVG(total_amount) AS avg_order_value \nFROM orders;",
  "example": "-- Total revenue per user\nSELECT user_id, SUM(total_amount) AS user_revenue \nFROM orders \nWHERE status = 'completed' \nGROUP BY user_id;\n\n-- Total revenue per product\nSELECT oi.product_id, SUM(oi.quantity * oi.price) AS product_revenue\nFROM order_items oi\nJOIN orders o ON o.id = oi.order_id\nWHERE o.status = 'completed'\nGROUP BY oi.product_id;\n\n-- Count items in each cart\nSELECT cart_id, COUNT(*) AS item_count \nFROM cart_items \nGROUP BY cart_id;\n\n-- Total stock value (price * quantity)\nSELECT SUM(price * stock_quantity) AS total_stock_value \nFROM products;\n\n-- Count returns per status\nSELECT status, COUNT(*) AS return_count \nFROM returns \nGROUP BY status;\n\n-- Total refund amount requested\nSELECT SUM(refund_amount) AS total_refunds \nFROM returns WHERE status IN ('approved', 'completed');\n\n-- Total completed payments amount\nSELECT SUM(amount) AS total_payments \nFROM payments WHERE status = 'completed';",
  "useCase": "Revenue calculations, statistics, counts, averages, business metrics, reporting",
  "category": "Aggregation"
}
