{
  "id": "data-modification",
  "title": "Data Modification (UPDATE, DELETE, INSERT)",
  "description": "Modify data using UPDATE, DELETE, and INSERT statements including bulk operations and soft deletes.",
  "code": "-- Update product price by 10%\nUPDATE products \nSET price = price * 1.10 \nWHERE category = 'Electronics';\n\n-- Reduce stock after purchase\nUPDATE products \nSET stock_quantity = stock_quantity - 2 \nWHERE id = 101;\n\n-- Soft delete a product\nUPDATE products \nSET deleted_at = NOW() \nWHERE id = 101;\n\n-- Change user role\nUPDATE users \nSET role = 'admin' \nWHERE id = 5;\n\n-- Bulk insert products\nINSERT INTO products (name, sku, price, stock_quantity, category)\nVALUES \n  ('Product A', 'SKU-001', 99.99, 50, 'Electronics'),\n  ('Product B', 'SKU-002', 149.99, 30, 'Electronics'),\n  ('Product C', 'SKU-003', 79.99, 100, 'Books');",
  "example": "-- Delete abandoned carts (30 days old)\nDELETE FROM carts \nWHERE updated_at < NOW() - INTERVAL '30 days'\n  AND status = 'active';\n\n-- Refund an order\nBEGIN;\n  UPDATE orders \n  SET status = 'refunded' \n  WHERE id = 1001;\n  \n  INSERT INTO payments (order_id, amount, status, payment_type)\n  VALUES (1001, -199.99, 'completed', 'refund');\nCOMMIT;\n\n-- Change order status from processing â†’ shipped\nUPDATE orders \nSET status = 'shipped', \n    shipped_at = NOW() \nWHERE id = 1001 AND status = 'processing';\n\n-- Expire stock reservations\nDELETE FROM stock_reservations \nWHERE expires_at < NOW();\n\n-- Update payment status to completed\nUPDATE payments \nSET status = 'completed', \n    completed_at = NOW() \nWHERE id = 501 AND status = 'processing';\n\n-- Update multiple columns conditionally\nUPDATE products \nSET \n  price = CASE \n    WHEN category = 'Electronics' THEN price * 1.05\n    WHEN category = 'Books' THEN price * 1.02\n    ELSE price\n  END,\n  updated_at = NOW();\n\n-- Insert with ON CONFLICT (upsert)\nINSERT INTO products (sku, name, price, stock_quantity)\nVALUES ('SKU-001', 'Product A', 99.99, 50)\nON CONFLICT (sku) \nDO UPDATE SET \n  price = EXCLUDED.price,\n  stock_quantity = products.stock_quantity + EXCLUDED.stock_quantity;\n\n-- Delete with RETURNING\nDELETE FROM carts \nWHERE updated_at < NOW() - INTERVAL '30 days'\nRETURNING id, user_id, created_at;\n\n-- Update from JOIN\nUPDATE products p\nSET stock_quantity = stock_quantity - oi.quantity\nFROM order_items oi\nWHERE oi.product_id = p.id AND oi.order_id = 1001;",
  "useCase": "Data management, price updates, inventory management, status changes, bulk operations",
  "category": "Data Management"
}
