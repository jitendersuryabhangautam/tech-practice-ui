{
  "id": "joins",
  "title": "JOIN Types",
  "description": "Combine rows from multiple tables based on related columns.",
  "code": "-- CANONICAL E-COMMERCE SCHEMA\nCREATE TABLE users (\n  id SERIAL PRIMARY KEY,\n  first_name VARCHAR(100) NOT NULL,\n  last_name VARCHAR(100) NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  role VARCHAR(20) NOT NULL DEFAULT 'customer',\n  created_at TIMESTAMP DEFAULT NOW(),\n  updated_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE products (\n  id SERIAL PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  sku VARCHAR(100) UNIQUE NOT NULL,\n  price DECIMAL(10,2) NOT NULL,\n  stock_quantity INT NOT NULL DEFAULT 0,\n  category VARCHAR(100),\n  image_url TEXT,\n  created_at TIMESTAMP DEFAULT NOW(),\n  updated_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE orders (\n  id SERIAL PRIMARY KEY,\n  order_number VARCHAR(50) UNIQUE NOT NULL,\n  user_id INT NOT NULL REFERENCES users(id),\n  total_amount DECIMAL(10,2) NOT NULL,\n  status VARCHAR(20) NOT NULL,\n  payment_method VARCHAR(20),\n  shipping_address JSONB,\n  billing_address JSONB,\n  created_at TIMESTAMP DEFAULT NOW(),\n  updated_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE order_items (\n  id SERIAL PRIMARY KEY,\n  order_id INT NOT NULL REFERENCES orders(id),\n  product_id INT NOT NULL REFERENCES products(id),\n  quantity INT NOT NULL,\n  price_at_time DECIMAL(10,2) NOT NULL\n);\n\nCREATE TABLE payments (\n  id SERIAL PRIMARY KEY,\n  order_id INT NOT NULL REFERENCES orders(id),\n  amount DECIMAL(10,2) NOT NULL,\n  payment_method VARCHAR(20) NOT NULL,\n  status VARCHAR(20) NOT NULL,\n  transaction_id VARCHAR(100),\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\n-- INNER JOIN (matching rows only)\nSELECT u.first_name, u.last_name, o.total_amount, o.status \nFROM users u \nINNER JOIN orders o ON u.id = o.user_id;\n\n-- LEFT JOIN (all from left table)\nSELECT u.first_name, u.last_name, COUNT(o.id) as order_count \nFROM users u \nLEFT JOIN orders o ON u.id = o.user_id \nGROUP BY u.id, u.first_name, u.last_name;\n\n-- RIGHT JOIN (all from right table)\nSELECT u.first_name, u.last_name, o.total_amount \nFROM users u \nRIGHT JOIN orders o ON u.id = o.user_id;\n\n-- FULL OUTER JOIN (all rows from both)\nSELECT * FROM users u \nFULL OUTER JOIN orders o ON u.id = o.user_id;",
  "example": "-- Multiple joins\nSELECT \n  u.name as user_name,\n  o.id as order_id,\n  p.name as product_name,\n  oi.quantity,\n  oi.price_at_time\nFROM users u\nINNER JOIN orders o ON u.id = o.user_id\nINNER JOIN order_items oi ON o.id = oi.order_id\nINNER JOIN products p ON oi.product_id = p.id\nWHERE o.status = 'completed';\n\n-- Self join\nSELECT \n  e.name as employee,\n  m.name as manager\nFROM employees e\nLEFT JOIN employees m ON e.manager_id = m.id;",
  "useCase": "Combining related data, complex queries, reporting, data analysis",
  "category": "Joins & Relationships"
}
