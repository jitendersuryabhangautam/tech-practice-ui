{
  "id": "index-optimization",
  "title": "Index Optimization",
  "description": "Improve query performance using indexes, analyze execution plans, and create optimal index strategies.",
  "code": "-- Check execution plan of order query\nEXPLAIN ANALYZE\nSELECT * FROM orders \nWHERE user_id = 123 AND status = 'processing';\n\n-- Add composite index on (user_id, status)\nCREATE INDEX idx_orders_user_status \nON orders(user_id, status);\n\n-- Optimize product search by category + price\nCREATE INDEX idx_products_category_price \nON products(category, price);\n\n-- Create partial index on completed orders\nCREATE INDEX idx_orders_completed \nON orders(created_at) \nWHERE status = 'completed';",
  "example": "-- Index JSON city field\nCREATE INDEX idx_orders_shipping_city \nON orders ((shipping_address->>'city'));\n\n-- Create covering index for order listing\nCREATE INDEX idx_orders_covering \nON orders(user_id, created_at) \nINCLUDE (order_number, total_amount, status);\n\n-- Compare query with and without index\n-- Without index\nEXPLAIN ANALYZE\nSELECT * FROM products WHERE category = 'Electronics';\n\n-- Create index\nCREATE INDEX idx_products_category ON products(category);\n\n-- With index (should show Index Scan)\nEXPLAIN ANALYZE\nSELECT * FROM products WHERE category = 'Electronics';\n\n-- Multi-column index for complex queries\nCREATE INDEX idx_orders_complex \nON orders(status, created_at DESC, user_id);\n\n-- Index for full-text search\nCREATE INDEX idx_products_name_search \nON products USING gin(to_tsvector('english', name));\n\n-- B-tree index for range queries\nCREATE INDEX idx_products_price_range \nON products(price);\n\n-- List all indexes on a table\nSELECT indexname, indexdef \nFROM pg_indexes \nWHERE tablename = 'orders';\n\n-- Drop unused index\nDROP INDEX IF EXISTS idx_old_index;\n\n-- Reindex to rebuild index\nREINDEX INDEX idx_orders_user_status;",
  "useCase": "Performance optimization, query tuning, database efficiency, production readiness",
  "category": "Performance"
}
